name: Build Android App

on:
  workflow_dispatch:
    branches: dev
    #can add push and pull_request here

jobs:
  build:
    name: Build and Release new apk
    run-on: ubuntu-latest 
    steps:
      -name: Checkout repository
       uses: action/checkout@v2

      -name: Install Java
       uses: action/setup-java@v2
       with:
        Java-version: '17.0.6'
        distribution: 'adopt'
        cache: "gradle"
      
      -name: Validate Gradle wrapper
       uses: gradle/wrapper-validation-action@v1

      -name: Setup Node
       uses: actions/setup-node@v3
       with:
        node-version:'21.4.0'
      
      -name: Run Yarn Install
        run: |
             cd ./packages/app-mobile/
             npm i -g corepack
             yarn install 
      
      -name: Build application
       run: |
            cd ./packages/app-mobile/android
            ./gradlew assembleDebug
      
      -name: Upload application
       uses: actions/upload-artifact@v2
       with: 
        name: app
        path: android\app\build\outputs\apk\debug\app-debug.apk
        